<html>
    <head>
        <title>Device Lab</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="../app/compiled.desktop.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="../js/libs/angular-file-upload-html5-shim.min.js"></script>
        
        <link rel="stylesheet" href="../css/compiled.desktop.css"> 
        
    </head>
    <script type="text/javascript">
    var drop_open = false;
    function showDrop() {
        if(drop_open){
            $(".dropdown-menu").css("display","none");
            drop_open = false;
        }
        if(!drop_open){
            $(".dropdown-menu").css("display","block");
            drop_open = true;
        } 
    }
    $(".dropdown-menu").on('click', function (e) {
        console.log('this is the click');
        e.preventDefault();
    });
    $(document).mouseup(function(e){
            var menu = $(".dropdown-menu");
            if (!menu.is(e.target) && menu.has(e.target).length === 0 && drop_open)
            {
                menu.css("display","none");
            }
    });
    </script>
    <body ng-app="cal" data-snap-ignore="true">
        <div ng-controller="RegisterCtrl">
            <div ng-include="'/fragments/register.html'"></div>
            <div ng-include="'/fragments/loading.html'"></div>
        </div>
        <div snap-drawers>
            <div ng-include="'/fragments/menu.html'"></div>
            <!-- <div ng-include="'/fragments/locations.html'"></div> -->
        </div>
        <div snap-content>
            <div id="header" snap-dragger>
                <!-- <h1 id="header-title">
                    <span  snap-toggle="left"><span class="icon-bars"></span></span>
                    <span class="pull-right" snap-toggle="right"><span class="icon-globe"></span></span>
                    <span id ="title" snap-toggle="left" ng-controller="TitleCtrl">{{page}}<span id="title-loc">   {{location}}</span></span>
                </h1> -->
                <h1 id="header-title">
                    <span  snap-toggle="left"><span class="icon-bars"></span></span>
                    <span class="pull-right" snap-toggle="right"></span>
                    <span id ="title" snap-toggle="left" ng-controller="TitleCtrl">{{page}}</span>
                </h1>
                <div id="title-location">
                    <div class="dropdown">
                      <a id="drop" class="dropdown-toggle" data-toggle="dropdown" onClick="showDrop()">
                        <span id ="title" ng-controller="TitleCtrl"><span id="title-loc">  {{location}}</span></span>
                        <span class="caret"></span>
                      </a>
                      <ul class="dropdown-menu" role="menu">
                        <div ng-controller="LocationDrawer">
                            <li ng-repeat="location in locations" ng-click="set(location.id)" role="menuitem" tabindex="-1"><span id="drop-loc-text">{{location.name}}</span><!-- <span class="icon-star" style="color: #E1E0E2; float: right; padding-top: 5px; padding-right: 7px;">
                            </span> -->
                            <cal-star style="color: #E1E0E2; float: right; padding-top: 5px; padding-right: 7px;" location="location.id"></cal-star>
                            </li>
                        </div>
                      </ul>
                </div>
                </div> 
            </div>
            <div class="container-fluid">
                <div ui-view></div>
            </div>
        </div>
        
    </body>
</html>
